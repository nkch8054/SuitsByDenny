(function(e){"use strict";var a={init:function(t){var r=this;if(!r.data("jqv")||r.data("jqv")==null){t=a._saveOptions(r,t);e(document).on("click",".formError",function(){e(this).fadeOut(150,function(){e(this).parent(".formErrorOuter").remove();e(this).remove()})})}return this},attach:function(t){var r=this;var i;if(t)i=a._saveOptions(r,t);else i=r.data("jqv");i.validateAttribute=r.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class";if(i.binded){r.on(i.validationEventTrigger,"["+i.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",a._onFieldEvent);r.on("click","["+i.validateAttribute+"*=validate][type=checkbox],["+i.validateAttribute+"*=validate][type=radio]",a._onFieldEvent);r.on(i.validationEventTrigger,"["+i.validateAttribute+"*=validate][class*=datepicker]",{delay:300},a._onFieldEvent)}if(i.autoPositionUpdate){e(window).bind("resize",{noAnimation:true,formElem:r},a.updatePromptsPosition)}r.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",a._submitButtonClick);r.removeData("jqv_submitButton");r.on("submit",a._onSubmitEvent);return this},detach:function(){var t=this;var r=t.data("jqv");t.find("["+r.validateAttribute+"*=validate]").not("[type=checkbox]").off(r.validationEventTrigger,a._onFieldEvent);t.find("["+r.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",a._onFieldEvent);t.off("submit",a.onAjaxFormComplete);t.off("submit",a.onAjaxFormComplete);t.removeData("jqv");t.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",a._submitButtonClick);t.removeData("jqv_submitButton");if(r.autoPositionUpdate)e(window).unbind("resize",a.updatePromptsPosition);return this},validate:function(){var t=e(this);var r=null;if(t.is("form")||t.hasClass("validationEngineContainer")){if(t.hasClass("validating")){return false}else{t.addClass("validating");var i=t.data("jqv");var r=a._validateFields(this);setTimeout(function(){t.removeClass("validating")},100);if(r&&i.onSuccess){i.onSuccess()}else if(!r&&i.onFailure){i.onFailure()}}}else if(t.is("form")||t.hasClass("validationEngineContainer")){t.removeClass("validating")}else{var s=t.closest("form, .validationEngineContainer"),i=s.data("jqv")?s.data("jqv"):e.validationEngine.defaults,r=a._validateField(t,i);if(r&&i.onFieldSuccess)i.onFieldSuccess();else if(i.onFieldFailure&&i.InvalidFields.length>0){i.onFieldFailure()}}if(i.onValidationComplete){return!!i.onValidationComplete(s,r)}return r},updatePromptsPosition:function(t){if(t&&this==window){var r=t.data.formElem;var i=t.data.noAnimation}else var r=e(this.closest("form, .validationEngineContainer"));var s=r.data("jqv");r.find("["+s.validateAttribute+"*=validate]").not(":disabled").each(function(){var t=e(this);if(s.prettySelect&&t.is(":hidden"))t=r.find("#"+s.usePrefix+t.attr("id")+s.useSuffix);var n=a._getPrompt(t);var l=e(n).find(".formErrorContent").html();if(n)a._updatePrompt(t,e(n),l,undefined,false,s,i)});return this},showPrompt:function(e,t,r,i){var s=this.closest("form, .validationEngineContainer");var n=s.data("jqv");if(!n)n=a._saveOptions(this,n);if(r)n.promptPosition=r;n.showArrow=i==true;a._showPrompt(this,e,t,false,n);return this},hide:function(){var t=e(this).closest("form, .validationEngineContainer");var r=t.data("jqv");var i=r&&r.fadeDuration?r.fadeDuration:.3;var s;if(e(this).is("form")||e(this).hasClass("validationEngineContainer")){s="parentForm"+a._getClassName(e(this).attr("id"))}else{s=a._getClassName(e(this).attr("id"))+"formError"}e("."+s).fadeTo(i,.3,function(){e(this).parent(".formErrorOuter").remove();e(this).remove()});return this},hideAll:function(){var a=this;var t=a.data("jqv");var r=t?t.fadeDuration:300;e(".formError").fadeTo(r,300,function(){e(this).parent(".formErrorOuter").remove();e(this).remove()});return this},_onFieldEvent:function(t){var r=e(this);var i=r.closest("form, .validationEngineContainer");var s=i.data("jqv");s.eventTrigger="field";window.setTimeout(function(){a._validateField(r,s);if(s.InvalidFields.length==0&&s.onFieldSuccess){s.onFieldSuccess()}else if(s.InvalidFields.length>0&&s.onFieldFailure){s.onFieldFailure()}},t.data?t.data.delay:0)},_onSubmitEvent:function(){var t=e(this);var r=t.data("jqv");if(t.data("jqv_submitButton")){var i=e("#"+t.data("jqv_submitButton"));if(i){if(i.length>0){if(i.hasClass("validate-skip")||i.attr("data-validation-engine-skip")=="true")return true}}}r.eventTrigger="submit";var s=a._validateFields(t);if(s&&r.ajaxFormValidation){a._validateFormWithAjax(t,r);return false}if(r.onValidationComplete){return!!r.onValidationComplete(t,s)}return s},_checkAjaxStatus:function(a){var t=true;e.each(a.ajaxValidCache,function(e,a){if(!a){t=false;return false}});return t},_checkAjaxFieldStatus:function(e,a){return a.ajaxValidCache[e]==true},_validateFields:function(t){var r=t.data("jqv");var i=false;t.trigger("jqv.form.validating");var s=null;t.find("["+r.validateAttribute+"*=validate]").not(":disabled").each(function(){var n=e(this);var l=[];if(e.inArray(n.attr("name"),l)<0){i|=a._validateField(n,r);if(i&&s==null)if(n.is(":hidden")&&r.prettySelect)s=n=t.find("#"+r.usePrefix+a._jqSelector(n.attr("id"))+r.useSuffix);else s=n;if(r.doNotShowAllErrosOnSubmit)return false;l.push(n.attr("name"));if(r.showOneMessage==true&&i){return false}}});t.trigger("jqv.form.result",[i]);if(i){if(r.scroll){var n=s.offset().top;var l=s.offset().left;var o=r.promptPosition;if(typeof o=="string"&&o.indexOf(":")!=-1)o=o.substring(0,o.indexOf(":"));if(o!="bottomRight"&&o!="bottomLeft"){var d=a._getPrompt(s);if(d){n=d.offset().top}}if(r.scrollOffset){n-=r.scrollOffset}if(r.isOverflown){var f=e(r.overflownDIV);if(!f.length)return false;var u=f.scrollTop();var v=-parseInt(f.offset().top);n+=u+v-5;var c=e(r.overflownDIV+":not(:animated)");c.animate({scrollTop:n},1100,function(){if(r.focusFirstField)s.focus()})}else{e("html, body").animate({scrollTop:n},1100,function(){if(r.focusFirstField)s.focus()});e("html, body").animate({scrollLeft:l},1100)}}else if(r.focusFirstField)s.focus();return false}return true},_validateFormWithAjax:function(t,r){var i=t.serialize();var s=r.ajaxFormValidationMethod?r.ajaxFormValidationMethod:"GET";var n=r.ajaxFormValidationURL?r.ajaxFormValidationURL:t.attr("action");var l=r.dataType?r.dataType:"json";e.ajax({type:s,url:n,cache:false,dataType:l,data:i,form:t,methods:a,options:r,beforeSend:function(){return r.onBeforeAjaxFormValidation(t,r)},error:function(e,t){a._ajaxError(e,t)},success:function(i){if(l=="json"&&i!==true){var s=false;for(var n=0;n<i.length;n++){var o=i[n];var d=o[0];var f=e(e("#"+d)[0]);if(f.length==1){var u=o[2];if(o[1]==true){if(u==""||!u){a._closePrompt(f)}else{if(r.allrules[u]){var v=r.allrules[u].alertTextOk;if(v)u=v}if(r.showPrompts)a._showPrompt(f,u,"pass",false,r,true)}}else{s|=true;if(r.allrules[u]){var v=r.allrules[u].alertText;if(v)u=v}if(r.showPrompts)a._showPrompt(f,u,"",false,r,true)}}}r.onAjaxFormComplete(!s,t,i,r)}else r.onAjaxFormComplete(true,t,i,r)}})},_validateField:function(t,r,i){if(!t.attr("id")){t.attr("id","form-validation-field-"+e.validationEngine.fieldIdCounter);++e.validationEngine.fieldIdCounter}if(!r.validateNonVisibleFields&&(t.is(":hidden")&&!r.prettySelect||t.parent().is(":hidden")))return false;var s=t.attr(r.validateAttribute);var n=/validate\[(.*)\]/.exec(s);if(!n)return false;var l=n[1];var o=l.split(/\[|,|\]/);var d=false;var f=t.attr("name");var u="";var v="";var c=false;var p=false;r.isError=false;r.showArrow=true;if(r.maxErrorsPerField>0){p=true}var m=e(t.closest("form, .validationEngineContainer"));for(var g=0;g<o.length;g++){o[g]=o[g].replace(" ","");if(o[g]===""){delete o[g]}}for(var g=0,h=0;g<o.length;g++){if(p&&h>=r.maxErrorsPerField){if(!c){var x=e.inArray("required",o);c=x!=-1&&x>=g}break}var _=undefined;switch(o[g]){case"required":c=true;_=a._getErrorMessage(m,t,o[g],o,g,r,a._required);break;case"custom":_=a._getErrorMessage(m,t,o[g],o,g,r,a._custom);break;case"groupRequired":var C="["+r.validateAttribute+"*="+o[g+1]+"]";var b=m.find(C).eq(0);if(b[0]!=t[0]){a._validateField(b,r,i);r.showArrow=true}_=a._getErrorMessage(m,t,o[g],o,g,r,a._groupRequired);if(_)c=true;r.showArrow=false;break;case"ajax":_=a._ajax(t,o,g,r);if(_){v="load"}break;case"minSize":_=a._getErrorMessage(m,t,o[g],o,g,r,a._minSize);break;case"maxSize":_=a._getErrorMessage(m,t,o[g],o,g,r,a._maxSize);break;case"min":_=a._getErrorMessage(m,t,o[g],o,g,r,a._min);break;case"max":_=a._getErrorMessage(m,t,o[g],o,g,r,a._max);break;case"past":_=a._getErrorMessage(m,t,o[g],o,g,r,a._past);break;case"future":_=a._getErrorMessage(m,t,o[g],o,g,r,a._future);break;case"dateRange":var C="["+r.validateAttribute+"*="+o[g+1]+"]";r.firstOfGroup=m.find(C).eq(0);r.secondOfGroup=m.find(C).eq(1);if(r.firstOfGroup[0].value||r.secondOfGroup[0].value){_=a._getErrorMessage(m,t,o[g],o,g,r,a._dateRange)}if(_)c=true;r.showArrow=false;break;case"dateTimeRange":var C="["+r.validateAttribute+"*="+o[g+1]+"]";r.firstOfGroup=m.find(C).eq(0);r.secondOfGroup=m.find(C).eq(1);if(r.firstOfGroup[0].value||r.secondOfGroup[0].value){_=a._getErrorMessage(m,t,o[g],o,g,r,a._dateTimeRange)}if(_)c=true;r.showArrow=false;break;case"maxCheckbox":t=e(m.find("input[name='"+f+"']"));_=a._getErrorMessage(m,t,o[g],o,g,r,a._maxCheckbox);break;case"minCheckbox":t=e(m.find("input[name='"+f+"']"));_=a._getErrorMessage(m,t,o[g],o,g,r,a._minCheckbox);break;case"equals":_=a._getErrorMessage(m,t,o[g],o,g,r,a._equals);break;case"funcCall":_=a._getErrorMessage(m,t,o[g],o,g,r,a._funcCall);break;case"creditCard":_=a._getErrorMessage(m,t,o[g],o,g,r,a._creditCard);break;case"condRequired":_=a._getErrorMessage(m,t,o[g],o,g,r,a._condRequired);if(_!==undefined){c=true}break;default:}var T=false;if(typeof _=="object"){switch(_.status){case"_break":T=true;break;case"_error":_=_.message;break;case"_error_no_prompt":return true;break;default:break}}if(T){break}if(typeof _=="string"){u+=_+"<br/>";r.isError=true;h++}}if(!c&&!t.val()&&t.val().length<1)r.isError=false;var E=t.prop("type");var F=t.data("promptPosition")||r.promptPosition;if((E=="radio"||E=="checkbox")&&m.find("input[name='"+f+"']").size()>1){if(F==="inline"){t=e(m.find("input[name='"+f+"'][type!=hidden]:last"))}else{t=e(m.find("input[name='"+f+"'][type!=hidden]:first"))}r.showArrow=false}if(t.is(":hidden")&&r.prettySelect){t=m.find("#"+r.usePrefix+a._jqSelector(t.attr("id"))+r.useSuffix)}if(r.isError&&r.showPrompts){a._showPrompt(t,u,v,false,r)}else{if(!d)a._closePrompt(t)}if(!d){t.trigger("jqv.field.result",[t,r.isError,u])}var k=e.inArray(t[0],r.InvalidFields);if(k==-1){if(r.isError)r.InvalidFields.push(t[0])}else if(!r.isError){r.InvalidFields.splice(k,1)}a._handleStatusCssClasses(t,r);if(r.isError&&r.onFieldFailure)r.onFieldFailure(t);if(!r.isError&&r.onFieldSuccess)r.onFieldSuccess(t);return r.isError},_handleStatusCssClasses:function(e,a){if(a.addSuccessCssClassToField)e.removeClass(a.addSuccessCssClassToField);if(a.addFailureCssClassToField)e.removeClass(a.addFailureCssClassToField);if(a.addSuccessCssClassToField&&!a.isError)e.addClass(a.addSuccessCssClassToField);if(a.addFailureCssClassToField&&a.isError)e.addClass(a.addFailureCssClassToField)},_getErrorMessage:function(t,r,i,s,n,l,o){var d=jQuery.inArray(i,s);if(i==="custom"||i==="funcCall"){var f=s[d+1];i=i+"["+f+"]";delete s[d]}var u=i;var v=r.attr("data-validation-engine")?r.attr("data-validation-engine"):r.attr("class");var c=v.split(" ");var p;if(i=="future"||i=="past"||i=="maxCheckbox"||i=="minCheckbox"){p=o(t,r,s,n,l)}else{p=o(r,s,n,l)}if(p!=undefined){var m=a._getCustomErrorMessage(e(r),c,u,l);if(m)p=m}return p},_getCustomErrorMessage:function(e,t,r,i){var s=false;var n=a._validityProp[r];if(n!=undefined){s=e.attr("data-errormessage-"+n);if(s!=undefined)return s}s=e.attr("data-errormessage");if(s!=undefined)return s;var l="#"+e.attr("id");if(typeof i.custom_error_messages[l]!="undefined"&&typeof i.custom_error_messages[l][r]!="undefined"){s=i.custom_error_messages[l][r]["message"]}else if(t.length>0){for(var o=0;o<t.length&&t.length>0;o++){var d="."+t[o];if(typeof i.custom_error_messages[d]!="undefined"&&typeof i.custom_error_messages[d][r]!="undefined"){s=i.custom_error_messages[d][r]["message"];break}}}if(!s&&typeof i.custom_error_messages[r]!="undefined"&&typeof i.custom_error_messages[r]["message"]!="undefined"){s=i.custom_error_messages[r]["message"]}return s},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(a,t,r,i,s){switch(a.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var n=e.trim(a.val());var l=e.trim(a.attr("data-validation-placeholder"));var o=e.trim(a.attr("placeholder"));if(!n||l&&n==l||o&&n==o){return i.allrules[t[r]].alertText}break;case"radio":case"checkbox":if(s){if(!a.attr("checked")){return i.allrules[t[r]].alertTextCheckboxMultiple}break}var d=a.closest("form, .validationEngineContainer");var f=a.attr("name");if(d.find("input[name='"+f+"']:checked").size()==0){if(d.find("input[name='"+f+"']:visible").size()==1)return i.allrules[t[r]].alertTextCheckboxe;else return i.allrules[t[r]].alertTextCheckboxMultiple}break}},_groupRequired:function(t,r,i,s){var n="["+s.validateAttribute+"*="+r[i+1]+"]";var l=false;t.closest("form, .validationEngineContainer").find(n).each(function(){if(!a._required(e(this),r,i,s)){l=true;return false}});if(!l){return s.allrules[r[i]].alertText}},_custom:function(e,a,t,r){var i=a[t+1];var s=r.allrules[i];var n;if(!s){alert("jqv:custom rule not found - "+i);return}if(s["regex"]){var l=s.regex;if(!l){alert("jqv:custom regex not found - "+i);return}var o=new RegExp(l);if(!o.test(e.val()))return r.allrules[i].alertText}else if(s["func"]){n=s["func"];if(typeof n!=="function"){alert("jqv:custom parameter 'function' is no function - "+i);return}if(!n(e,a,t,r))return r.allrules[i].alertText}else{alert("jqv:custom type not allowed "+i);return}},_funcCall:function(e,a,t,r){var i=a[t+1];var s;if(i.indexOf(".")>-1){var n=i.split(".");var l=window;while(n.length){l=l[n.shift()]}s=l}else s=window[i]||r.customFunctions[i];if(typeof s=="function")return s(e,a,t,r)},_equals:function(a,t,r,i){var s=t[r+1];if(a.val()!=e("#"+s).val())return i.allrules.equals.alertText},_maxSize:function(e,a,t,r){var i=a[t+1];var s=e.val().length;if(s>i){var n=r.allrules.maxSize;return n.alertText+i+n.alertText2}},_minSize:function(e,a,t,r){var i=a[t+1];var s=e.val().length;if(s<i){var n=r.allrules.minSize;return n.alertText+i+n.alertText2}},_min:function(e,a,t,r){var i=parseFloat(a[t+1]);var s=parseFloat(e.val());if(s<i){var n=r.allrules.min;if(n.alertText2)return n.alertText+i+n.alertText2;return n.alertText+i}},_max:function(e,a,t,r){var i=parseFloat(a[t+1]);var s=parseFloat(e.val());if(s>i){var n=r.allrules.max;if(n.alertText2)return n.alertText+i+n.alertText2;return n.alertText+i}},_past:function(t,r,i,s,n){var l=i[s+1];var o=e(t.find("input[name='"+l.replace(/^#+/,"")+"']"));var d;if(l.toLowerCase()=="now"){d=new Date}else if(undefined!=o.val()){if(o.is(":disabled"))return;d=a._parseDate(o.val())}else{d=a._parseDate(l)}var f=a._parseDate(r.val());if(f>d){var u=n.allrules.past;if(u.alertText2)return u.alertText+a._dateToString(d)+u.alertText2;return u.alertText+a._dateToString(d)}},_future:function(t,r,i,s,n){var l=i[s+1];var o=e(t.find("input[name='"+l.replace(/^#+/,"")+"']"));var d;if(l.toLowerCase()=="now"){d=new Date}else if(undefined!=o.val()){if(o.is(":disabled"))return;d=a._parseDate(o.val())}else{d=a._parseDate(l)}var f=a._parseDate(r.val());if(f<d){var u=n.allrules.future;if(u.alertText2)return u.alertText+a._dateToString(d)+u.alertText2;return u.alertText+a._dateToString(d)}},_isDate:function(e){var a=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return a.test(e)},_isDateTime:function(e){var a=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return a.test(e)},_dateCompare:function(e,a){return new Date(e.toString())<new Date(a.toString())},_dateRange:function(e,t,r,i){if(!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value){return i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2}if(!a._isDate(i.firstOfGroup[0].value)||!a._isDate(i.secondOfGroup[0].value)){return i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2}if(!a._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)){return i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2}},_dateTimeRange:function(e,t,r,i){if(!i.firstOfGroup[0].value&&i.secondOfGroup[0].value||i.firstOfGroup[0].value&&!i.secondOfGroup[0].value){return i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2}if(!a._isDateTime(i.firstOfGroup[0].value)||!a._isDateTime(i.secondOfGroup[0].value)){return i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2}if(!a._dateCompare(i.firstOfGroup[0].value,i.secondOfGroup[0].value)){return i.allrules[t[r]].alertText+i.allrules[t[r]].alertText2}},_maxCheckbox:function(e,a,t,r,i){var s=t[r+1];var n=a.attr("name");var l=e.find("input[name='"+n+"']:checked").size();if(l>s){i.showArrow=false;if(i.allrules.maxCheckbox.alertText2)return i.allrules.maxCheckbox.alertText+" "+s+" "+i.allrules.maxCheckbox.alertText2;return i.allrules.maxCheckbox.alertText}},_minCheckbox:function(e,a,t,r,i){var s=t[r+1];var n=a.attr("name");var l=e.find("input[name='"+n+"']:checked").size();if(l<s){i.showArrow=false;return i.allrules.minCheckbox.alertText+" "+s+" "+i.allrules.minCheckbox.alertText2}},_creditCard:function(e,a,t,r){var i=false,s=e.val().replace(/ +/g,"").replace(/-+/g,"");var n=s.length;if(n>=14&&n<=16&&parseInt(s)>0){var l=0,t=n-1,o=1,d,f=new String;do{d=parseInt(s.charAt(t));f+=o++%2==0?d*2:d}while(--t>=0);for(t=0;t<f.length;t++){l+=parseInt(f.charAt(t))}i=l%10==0}if(!i)return r.allrules.creditCard.alertText},_ajax:function(t,r,i,s){var n=r[i+1];var l=s.allrules[n];var o=l.extraData;var d=l.extraDataDynamic;var f={fieldId:t.attr("id"),fieldValue:t.val()};if(typeof o==="object"){e.extend(f,o)}else if(typeof o==="string"){var u=o.split("&");for(var i=0;i<u.length;i++){var v=u[i].split("=");if(v[0]&&v[0]){f[v[0]]=v[1]}}}if(d){var c=[];var p=String(d).split(",");for(var i=0;i<p.length;i++){var m=p[i];if(e(m).length){var g=t.closest("form, .validationEngineContainer").find(m).val();var h=m.replace("#","")+"="+escape(g);f[m.replace("#","")]=g}}}if(s.eventTrigger=="field"){delete s.ajaxValidCache[t.attr("id")]}if(!s.isError&&!a._checkAjaxFieldStatus(t.attr("id"),s)){e.ajax({type:s.ajaxFormValidationMethod,url:l.url,cache:false,dataType:"json",data:f,field:t,rule:l,methods:a,options:s,beforeSend:function(){},error:function(e,t){a._ajaxError(e,t)},success:function(r){var i=r[0];var n=e("#"+i).eq(0);if(n.length==1){var o=r[1];var d=r[2];if(!o){s.ajaxValidCache[i]=false;s.isError=true;if(d){if(s.allrules[d]){var f=s.allrules[d].alertText;if(f){d=f}}}else d=l.alertText;if(s.showPrompts)a._showPrompt(n,d,"",true,s)}else{s.ajaxValidCache[i]=true;if(d){if(s.allrules[d]){var f=s.allrules[d].alertTextOk;if(f){d=f}}}else d=l.alertTextOk;if(s.showPrompts){if(d)a._showPrompt(n,d,"pass",true,s);else a._closePrompt(n)}if(s.eventTrigger=="submit")t.closest("form").submit()}}n.trigger("jqv.field.result",[n,s.isError,d])}});return l.alertTextLoad}},_ajaxError:function(e,a){if(e.status==0&&a==null)alert("The page is not served from a server! ajax call failed");else if(typeof console!="undefined")console.log("Ajax error: "+e.status+" "+a)},_dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},_parseDate:function(e){var a=e.split("-");if(a==e)a=e.split("/");if(a==e){a=e.split(".");return new Date(a[2],a[1]-1,a[0])}return new Date(a[0],a[1]-1,a[2])},_showPrompt:function(t,r,i,s,n,l){var o=a._getPrompt(t);if(l)o=false;if(e.trim(r)){if(o)a._updatePrompt(t,o,r,i,s,n);else a._buildPrompt(t,r,i,s,n)}},_buildPrompt:function(t,r,i,s,n){var l=e("<div>");l.addClass(a._getClassName(t.attr("id"))+"formError");l.addClass("parentForm"+a._getClassName(t.closest("form, .validationEngineContainer").attr("id")));l.addClass("formError");switch(i){case"pass":l.addClass("greenPopup");break;case"load":l.addClass("blackPopup");break;default:}if(s)l.addClass("ajaxed");var o=e("<div>").addClass("formErrorContent").html(r).appendTo(l);var d=t.data("promptPosition")||n.promptPosition;if(n.showArrow){var f=e("<div>").addClass("formErrorArrow");if(typeof d=="string"){var u=d.indexOf(":");if(u!=-1)d=d.substring(0,u)}switch(d){case"bottomLeft":case"bottomRight":l.find(".formErrorContent").before(f);f.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case"topLeft":case"topRight":f.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>');l.append(f);break}}if(n.addPromptClass)l.addClass(n.addPromptClass);var v=t.attr("data-required-class");if(v!==undefined){l.addClass(v)}else{if(n.prettySelect){if(e("#"+t.attr("id")).next().is("select")){var c=e("#"+t.attr("id").substr(n.usePrefix.length).substring(n.useSuffix.length)).attr("data-required-class");if(c!==undefined){l.addClass(c)}}}}l.css({opacity:0});if(d==="inline"){l.addClass("inline");if(typeof t.attr("data-prompt-target")!=="undefined"&&e("#"+t.attr("data-prompt-target")).length>0){l.appendTo(e("#"+t.attr("data-prompt-target")))}else{t.after(l)}}else{t.before(l)}var u=a._calculatePosition(t,l,n);l.css({position:d==="inline"?"relative":"absolute",top:u.callerTopPosition,left:u.callerleftPosition,marginTop:u.marginTopSize,opacity:0}).data("callerField",t);if(n.autoHidePrompt){setTimeout(function(){l.animate({opacity:0},function(){l.closest(".formErrorOuter").remove();l.remove()})},n.autoHideDelay)}return l.animate({opacity:.87})},_updatePrompt:function(e,t,r,i,s,n,l){if(t){if(typeof i!=="undefined"){if(i=="pass")t.addClass("greenPopup");else t.removeClass("greenPopup");if(i=="load")t.addClass("blackPopup");else t.removeClass("blackPopup")}if(s)t.addClass("ajaxed");else t.removeClass("ajaxed");t.find(".formErrorContent").html(r);var o=a._calculatePosition(e,t,n);var d={top:o.callerTopPosition,left:o.callerleftPosition,marginTop:o.marginTopSize};if(l)t.css(d);else t.animate(d)}},_closePrompt:function(e){var t=a._getPrompt(e);if(t)t.fadeTo("fast",0,function(){t.parent(".formErrorOuter").remove();t.remove()})},closePrompt:function(e){return a._closePrompt(e)},_getPrompt:function(t){var r=e(t).closest("form, .validationEngineContainer").attr("id");var i=a._getClassName(t.attr("id"))+"formError";var s=e("."+a._escapeExpression(i)+".parentForm"+r)[0];if(s)return e(s)},_escapeExpression:function(e){return e.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(a){var t=e(document);var r=e("body");var i=a&&a.hasClass("rtl")||a&&(a.attr("dir")||"").toLowerCase()==="rtl"||t.hasClass("rtl")||(t.attr("dir")||"").toLowerCase()==="rtl"||r.hasClass("rtl")||(r.attr("dir")||"").toLowerCase()==="rtl";return Boolean(i)},_calculatePosition:function(e,a,t){var r,i,s;var n=e.width();var l=e.position().left;var o=e.position().top;var d=e.height();var f=a.height();r=i=0;s=-f;var u=e.data("promptPosition")||t.promptPosition;var v="";var c="";var p=0;var m=0;if(typeof u=="string"){if(u.indexOf(":")!=-1){v=u.substring(u.indexOf(":")+1);u=u.substring(0,u.indexOf(":"));if(v.indexOf(",")!=-1){c=v.substring(v.indexOf(",")+1);v=v.substring(0,v.indexOf(","));m=parseInt(c);if(isNaN(m))m=0}p=parseInt(v);if(isNaN(v))v=0}}switch(u){default:case"topRight":i+=l+n-30;r+=o;break;case"topLeft":r+=o;i+=l;break;case"centerRight":r=o+4;s=0;i=l+e.outerWidth(true)+5;break;case"centerLeft":i=l-(a.width()+2);r=o+4;s=0;break;case"bottomLeft":r=o+e.height()+5;s=0;i=l;break;case"bottomRight":i=l+n-30;r=o+e.height()+5;s=0;break;case"inline":i=0;r=0;s=0}i+=p;r+=m;return{callerTopPosition:r+"px",callerleftPosition:i+"px",marginTopSize:s+"px"}},_saveOptions:function(a,t){if(e.validationEngineLanguage)var r=e.validationEngineLanguage.allRules;else e.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");e.validationEngine.defaults.allrules=r;var i=e.extend(true,{},e.validationEngine.defaults,t);a.data("jqv",i);return i},_getClassName:function(e){if(e)return e.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(e){return e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(e,t,r,i){var s,n;for(s=r+1;s<t.length;s++){n=jQuery("#"+t[s]).first();if(n.length&&a._required(n,["required"],0,i,true)==undefined){return a._required(e,["required"],0,i)}}},_submitButtonClick:function(a){var t=e(this);var r=t.closest("form, .validationEngineContainer");r.data("jqv_submitButton",t.attr("id"))}};e.fn.validationEngine=function(t){var r=e(this);if(!r[0])return r;if(typeof t=="string"&&t.charAt(0)!="_"&&a[t]){if(t!="showPrompt"&&t!="hide"&&t!="hideAll")a.init.apply(r);return a[t].apply(r,Array.prototype.slice.call(arguments,1))}else if(typeof t=="object"||!t){a.init.apply(r,arguments);return a.attach.apply(r)}else{e.error("Method "+t+" does not exist in jQuery.validationEngine")}};e.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:"get",onAjaxFormComplete:e.noop,onBeforeAjaxFormValidation:e.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:false,autoHideDelay:1e4,fadeDuration:.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};e(function(){e.validationEngine.defaults.promptPosition=a.isRTL()?"topLeft":"topRight"})})(jQuery);